---
title: Introduction
hide_title: true
description: A complete framework for building type-safe, real-time applications with Convex.
links:
  doc: https://docs.convex.dev
---

import { InfoIcon } from "lucide-react"

## Introduction

Better Convex is a complete framework for Convex. It brings tRPC-style APIs, TanStack Query, Convex Ents, and Better Auth together into a cohesive developer experience.

**This is not just a query wrapper.** It's how you build production Convex applications.

## Philosophy

We didn't reinvent the wheel. Better Convex integrates battle-tested tools—Convex Ents for relationships, TanStack Query for caching, Better Auth for authentication—into a unified developer experience.

Instead of assembling these yourself with custom glue code, you get:

- **Type safety end-to-end** — From schema to procedures to client, with full inference
- **Real-time by default** — WebSocket subscriptions flow into TanStack Query cache
- **TanStack Query native** — No wrapper hooks, use `useQuery` and `useMutation` directly
- **Incremental adoption** — Add features as you need them, migrate function by function

## What's Included

| Layer | Feature | Description |
|-------|---------|-------------|
| **Server** | cRPC | tRPC-style procedure builder with `.input()`, `.use()`, middleware |
| **Database** | Ents | Relationships, fluent queries, `ctx.table()` |
| **Database** | Triggers | Automatic side effects on data changes |
| **Database** | Aggregates | O(log n) counts, sums, leaderboards |
| **Client** | React | TanStack Query integration with real-time sync |
| **Client** | Next.js | RSC prefetching, hydration, server caller |
| **Auth** | Better Auth | Lifecycle hooks, session management, guards |
| **CLI** | Codegen | Procedure metadata for auth-aware queries |

## Quick Look

```tsx showLineNumbers {2-5,8}
// Server: Define a procedure
export const list = authQuery
  .input(z.object({ limit: z.number().optional() }))
  .query(async ({ ctx, input }) => {
    return ctx.table('posts').take(input.limit ?? 10);
  });

// Client: Use it with TanStack Query
const { data: posts } = useQuery(crpc.posts.list.queryOptions({ limit: 10 }));
```

## Packages

| Export | Description |
|--------|-------------|
| `better-convex/server` | cRPC builder, middleware, server caller |
| `better-convex/react` | React client, providers, auth hooks |
| `better-convex/rsc` | RSC prefetching, hydration |
| `better-convex/auth` | Better Auth adapter |
| `better-convex/auth-nextjs` | Better Auth Next.js adapter |

## Requirements

- Convex 1.31+
- TanStack Query 5+
- React 18+

## Next Steps

<Cards>
  <Card title="Quickstart" href="/docs/quickstart" />
  <Card title="Templates" href="/docs/templates" />
  <Card title="Concepts" href="/docs/concepts" />
</Cards>

---

## For AI Agents

If you're an AI agent integrating better-convex, **ask the user to select their stack before starting**. Use your `AskUserQuestion` tool (or equivalent) to let them pick:

### Required Choices

| Feature | Options | Default |
|---------|---------|---------|
| **Approach** | Top-down (copy from Templates), Bottom-up (follow docs step-by-step) | Top-down |
| **React Framework** | Next.js App Router, Vite, Remix, Other | Next.js |
| **Database API** | `ctx.table` (Ents), `ctx.db` (vanilla) | ctx.table |

### Optional Features

| Feature | Options | When to Include |
|---------|---------|-----------------|
| **Auth** | Better Auth, Custom, None | Most apps need auth |
| **SSR/RSC** | Yes, No | Next.js App Router apps |
| **Triggers** | Yes, No | Auto side effects on data changes |
| **Aggregates** | Yes, No | Counts, sums, leaderboards |
| **Rate Limiting** | Yes, No | API protection |

### After Selection

**Top-down approach:**
1. Copy relevant sections from [Templates](/docs/templates) based on choices
2. For `ctx.table`: use the "ctx.table" tab in code examples
3. For `ctx.db`: use the "ctx.db" tab in code examples
4. Skip sections for features not selected

**Bottom-up approach:**
1. Follow [Quickstart](/docs/quickstart) for initial setup
2. Read individual docs for each feature needed
3. Reference [Templates](/docs/templates) for production patterns

### Quick Reference by Stack

| Stack | Key Docs |
|-------|----------|
| Next.js + Better Auth + Ents | [Templates](/docs/templates), [Next.js Setup](/docs/nextjs/setup), [Auth Server](/docs/auth/server) |
| Next.js + Better Auth + ctx.db | [Templates](/docs/templates) (ctx.db tabs), [Next.js Setup](/docs/nextjs/setup) |
| Vite + No Auth | [React Setup](/docs/react/setup), [Server Setup](/docs/server/setup) |
| Any + Custom Auth | [Server Setup](/docs/server/setup), [Middlewares](/docs/server/middlewares) |

---

## Documentation Map

Complete reference for all documentation pages.

### Getting Started

| Page | When to Use |
|------|-------------|
| [Quickstart](/docs/quickstart) | First-time setup. Follow step-by-step to get a working app. |
| [Concepts](/docs/concepts) | Understand architecture, folder structure (`convex/functions/`, `convex/lib/`, `convex/shared/`), and design decisions. |
| [Templates](/docs/templates) | **Copy-paste production code.** Complete files for schema, cRPC, providers, auth, triggers, rate limiting. Start here for fastest setup. |

### Server (Backend)

| Page | When to Use |
|------|-------------|
| [Server Setup](/docs/server/setup) | Initialize cRPC builder with `initCRPC`. Configure `dataModel`, `context`, `meta`. |
| [Procedures](/docs/server/procedures) | Define queries, mutations, actions with `.input()`, `.output()`, `.query()/.mutation()/.action()`. Paginated queries with `.paginated()`. |
| [Context](/docs/server/context) | Extend context with `ctx.db`, `ctx.table`, `ctx.auth`. Add custom properties via `.context()`. |
| [Middlewares](/docs/server/middlewares) | Create reusable middleware with `.use()`. Auth guards, logging, rate limiting. Chain with `.pipe()`. |
| [Metadata](/docs/server/metadata) | Add procedure metadata with `.meta()`. Used by CLI for auth-aware query handling. |
| [Error Handling](/docs/server/error-handling) | Throw `CRPCError` with codes like `UNAUTHORIZED`, `NOT_FOUND`, `BAD_REQUEST`. |
| [Server-Side Calls](/docs/server/server-side-calls) | Call procedures from server with `createCallerFactory`. RSC data fetching. |
| [Rate Limiting](/docs/server/rate-limiting) | Token bucket and fixed window rate limiting with `@convex-dev/rate-limiter`. |

### Database

| Page | When to Use |
|------|-------------|
| [Ents](/docs/db/ents) | Use `ctx.table()` instead of `ctx.db`. Relationships, fluent queries, `.edge()`, `.edges()`. |
| [Triggers](/docs/db/triggers) | Automatic side effects on insert/update/delete. Use `convex-helpers/server/triggers`. |
| [Aggregates](/docs/db/aggregates) | O(log n) counts and sums with `@convex-dev/aggregate`. Leaderboards, running totals. |

### React (Client)

| Page | When to Use |
|------|-------------|
| [React Setup](/docs/react/setup) | Configure providers: `QueryClientProvider`, `CRPCProvider`. Singleton helpers. |
| [Queries](/docs/react/queries) | `useQuery` with `crpc.path.queryOptions()`. Real-time updates, `skipToken` for conditional queries. |
| [Mutations](/docs/react/mutations) | `useMutation` with `crpc.path.mutationOptions()`. Toast patterns, optimistic updates. |
| [Infinite Queries](/docs/react/infinite-queries) | `useInfiniteQuery` with `crpc.path.infiniteQueryOptions()`. Cursor-based pagination. |
| [Type Inference](/docs/react/infer-types) | `inferApiInputs`, `inferApiOutputs` for tRPC-style type extraction. |
| [Error Handling](/docs/react/error-handling) | Handle `CRPCClientError` on client. Error boundaries, toast notifications. |

### Next.js

| Page | When to Use |
|------|-------------|
| [Next.js Setup](/docs/nextjs/setup) | Configure `convexBetterAuth` for RSC. Server caller factory, JWT caching. |
| [RSC](/docs/nextjs/rsc) | Server components with `prefetch`, `preloadQuery`, `HydrateClient`. SSR data fetching. |

### Auth (Better Auth)

| Page | When to Use |
|------|-------------|
| [Auth Overview](/docs/auth) | Architecture overview. When to use Better Auth vs other auth solutions. |
| [Auth Server](/docs/auth/server) | Complete Better Auth setup: schema, adapters, HTTP routes, helpers. |
| [Auth Client](/docs/auth/client) | `useAuth`, `Authenticated`/`Unauthenticated` components. |
| [Auth Triggers](/docs/auth/triggers) | User lifecycle hooks: `beforeCreate`, `onCreate`, `onDelete`. |

### Reference

| Page | When to Use |
|------|-------------|
| [CLI](/docs/cli) | `better-convex dev` for codegen. Procedure metadata generation. |
| [Migration](/docs/migration) | Migrate from vanilla Convex. Function-by-function upgrade guide. |
| [Comparison](/docs/comparison) | Compare with tRPC, Convex hooks, other patterns. |

### Common Workflows

**New project setup:**
1. [Quickstart](/docs/quickstart) → basic setup
2. [Templates](/docs/templates) → copy production files
3. [Concepts](/docs/concepts) → understand folder structure

**Add authentication:**
1. [Auth Server](/docs/auth/server) → configure Better Auth
2. [Auth Client](/docs/auth/client) → use auth in components
3. [Middlewares](/docs/server/middlewares) → protect procedures

**Add database features:**
1. [Ents](/docs/db/ents) → relationships with `ctx.table()`
2. [Triggers](/docs/db/triggers) → automatic side effects
3. [Aggregates](/docs/db/aggregates) → counts and sums

**Server components (RSC):**
1. [Next.js Setup](/docs/nextjs/setup) → configure caller
2. [RSC](/docs/nextjs/rsc) → prefetch and hydrate
