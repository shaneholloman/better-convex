---
title: Drizzle Comparison
description: Side-by-side API comparison between Drizzle ORM and Better-Convex with migration guide
links:
  doc: https://orm.drizzle.team
---

import { InfoIcon, CheckCircle, AlertTriangle } from "lucide-react"

Compare Drizzle ORM and Better-Convex ORM APIs side-by-side. This guide shows exact API mappings and migration paths for Drizzle developers.

## API Compatibility Overview

**Current Implementation (M1-M6.5):**
- âœ… Schema definition (`convexTable`, column builders)
- âœ… Relations definition (`one()`, `many()`)
- âœ… Relation loading (`with:`)
- âœ… Query builder (`findMany`, `findFirst`, `paginate`)
- âœ… Where filtering (all operators)
- âœ… Order by (multi-field, index-aware first sort)
- âœ… Column selection (post-fetch)
- âœ… String operators (post-fetch)
- âœ… Type inference

**Coming Soon:**
- ðŸš§ Mutations (`insert`, `update`, `delete`)

### Migration Checklist

- [ ] Install `better-convex`
- [ ] Convert table definitions to `convexTable()` with column builders (`text`, `integer`, etc.)
- [ ] Define relations using `relations()` (loading via `with:` supported)
- [ ] Update imports from `drizzle-orm` to `better-convex/orm`
- [ ] Build schema with `buildSchema()` and edges with `extractRelationsConfig()`
- [ ] Create database instance with `createDatabase(ctx.db, ormSchema, ormEdges)`
- [ ] Update `where` clauses to use callback form
- [ ] Keep `orderBy` and `columns` (post-fetch)
- [ ] Use native Convex mutations for now

## Installation

<Tabs groupId="package-manager" items={['npm', 'pnpm', 'yarn', 'bun']} persist>
  <Tab value="npm">
    ```bash
    npm install better-convex
    npm uninstall drizzle-orm # Optional
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm add better-convex
    pnpm remove drizzle-orm # Optional
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn add better-convex
    yarn remove drizzle-orm # Optional
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bun add better-convex
    bun remove drizzle-orm # Optional
    ```
  </Tab>
</Tabs>

## API Migration Guide

### Schema Definition

<Tabs groupId="migration" items={['Drizzle', 'Better-Convex']} persist>
  <Tab value="Drizzle">
    ```ts
    import { pgTable, serial, text, integer, boolean } from 'drizzle-orm/pg-core';

    const users = pgTable('users', {
      id: serial('id').primaryKey(),
      name: text('name').notNull(),
      email: text('email').notNull(),
      age: integer('age'),
      isAdmin: boolean('is_admin').default(false),
    });

    const posts = pgTable('posts', {
      id: serial('id').primaryKey(),
      title: text('title').notNull(),
      content: text('content').notNull(),
      published: boolean('published').default(false),
      userId: integer('user_id').references(() => users.id),
    });
    ```
  </Tab>
  <Tab value="Better-Convex">
    ```ts
    import { convexTable, text, integer, boolean, id } from 'better-convex/orm';

    const users = convexTable('users', {
      // _id is auto-created as Id<'users'>
      name: text().notNull(),
      email: text().notNull(),
      age: integer(),
      isAdmin: boolean(),
    });

    const posts = convexTable('posts', {
      // _id is auto-created as Id<'posts'>
      title: text().notNull(),
      content: text().notNull(),
      published: boolean(),
      userId: id('users'),
    });
    ```
  </Tab>
</Tabs>

**Key Changes:**
- **IDs**: Use auto-generated `_id` instead of manual `id` field
- **Types**: Use column builders (`text()`, `integer()`, etc.)
- **Nullable**: Fields are nullable by default; use `.notNull()` for required
- **Foreign Keys**: Use `id('table')` for references

### Relations

<Tabs groupId="migration" items={['Drizzle', 'Better-Convex']} persist>
  <Tab value="Drizzle">
    ```ts
    import { relations } from 'drizzle-orm';

    const usersRelations = relations(users, ({ many }) => ({
      posts: many(posts),
    }));

    const postsRelations = relations(posts, ({ one }) => ({
      author: one(users, {
        fields: [posts.userId],
        references: [users.id],
      }),
    }));
    ```
  </Tab>
  <Tab value="Better-Convex">
    ```ts
    import { relations } from 'better-convex/orm';

    const usersRelations = relations(users, ({ many }) => ({
      posts: many(posts),
    }));

    const postsRelations = relations(posts, ({ one }) => ({
      author: one(users, {
        fields: [posts.userId],
        references: [users._id], // Use _id instead of id
      }),
    }));
    ```
  </Tab>
</Tabs>

**Key Changes:**
- **API**: 100% identical except `_id` vs `id`
- **Import**: `better-convex/orm` instead of `drizzle-orm`

### Queries

<Tabs groupId="migration" items={['Drizzle', 'Better-Convex']} persist>
  <Tab value="Drizzle">
    ```ts
    const users = await db.query.users.findMany();

    const user = await db.query.users.findFirst({
      where: (users, { eq }) => eq(users.email, 'alice@example.com'),
    });

    const admins = await db.query.users.findMany({
      where: (users, { and, eq, gt }) =>
        and(
          eq(users.role, 'admin'),
          gt(users.lastSeen, Date.now() - 86_400_000)
        ),
    });
    ```
  </Tab>
  <Tab value="Better-Convex">
    ```ts
    import { createDatabase } from 'better-convex/orm';
    import { ormSchema, ormEdges } from './schema';

    const db = createDatabase(ctx.db, ormSchema, ormEdges);

    const users = await db.query.users.findMany();

    const user = await db.query.users.findFirst({
      where: (users, { eq }) => eq(users.email, 'alice@example.com'),
    });

    const admins = await db.query.users.findMany({
      where: (users, { and, eq, gt }) =>
        and(
          eq(users.role, 'admin'),
          gt(users.lastSeen, Date.now() - 86_400_000)
        ),
    });
    ```
  </Tab>
</Tabs>

**Key Changes:**
- **Context**: Use `createDatabase(ctx.db, ormSchema, ormEdges)`
- **Where**: Keep callback form (same as Drizzle RQB)

### Mutations (ðŸš§ Coming Soon)

<Callout icon={<AlertTriangle />}>
**Not Yet Implemented**: Mutation APIs (`insert`, `update`, `delete`) are planned. Use native Convex mutations for now.
</Callout>

## Complete API Mapping

| Drizzle API | Better-Convex API | Compatibility |
|-------------|-------------------|---------------|
| `pgTable()` / `mysqlTable()` | `convexTable()` | âœ… API identical |
| `relations()` | `relations()` | âœ… 100% identical |
| `db.query.*.findMany()` | `db.query.*.findMany()` (via `createDatabase`) | âœ… Equivalent |
| `db.query.*.findFirst()` | `db.query.*.findFirst()` (via `createDatabase`) | âœ… Equivalent |
| `eq()`, `ne()`, `gt()`, etc. | Same | âœ… 100% identical |
| `and()`, `or()`, `not()` | Same | âœ… 100% identical |
| `with` (relations) | `with` | âœ… 100% identical |
| `where` (filtering) | `where` callback | âœ… 100% identical |
| `limit` / `offset` | `limit` / `offset` | âœ… 100% identical |
| `orderBy()` | `orderBy()` | âœ… Multi-field supported |
| `columns` | `columns` | âœ… Post-fetch projection |
| `like()` / `ilike()` | `like()` / `ilike()` | âœ… Post-fetch filtering |
| Raw SQL | âŒ Not supported | âŒ Convex uses documents |
| Migrations | âŒ Not supported | âŒ Convex is schemaless |

## Feature Categories

### Category 1: âœ… Drizzle-Compatible

These APIs work in Better-Convex with the same surface area:

**Schema:**
- Table definitions
- Relations (`one()`, `many()`)
- Basic field types

**Queries:**
- `findMany()`, `findFirst()`, `paginate()`
- `with` (relation loading)
- `where` (filtering)
- `limit`, `offset`
- `orderBy` (multi-field)
- `columns` (post-fetch)
- String operators (post-fetch)

### Category 2: âš ï¸ Limited/Workaround

These features require alternative approaches or are planned:

| Feature | Drizzle | Better-Convex Workaround |
|---------|---------|--------------------------|
| Mutations | `insert/update/delete` | Use native Convex mutations |
| Defaults | `.default()` | Set defaults in application logic |
| Unique constraints | `.unique()` | Use Convex Ents `defineEntSchema` |

### Category 3: ðŸš€ Convex-Native Advantages

Features Better-Convex has that Drizzle doesn't:

- **Real-Time Subscriptions**: Convex queries are reactive
- **Cursor Pagination**: `paginate()` for large lists
- **Serverless Scaling**: No connection pooling

### Category 4: âŒ Not Applicable

SQL-specific features not needed in Convex:

- Raw SQL queries
- Database migrations
- Complex SQL joins

## Migration Gotchas

| Gotcha | Solution |
|--------|----------|
| **No `db` instance** | Use `createDatabase(ctx.db, ormSchema, ormEdges)` |
| **`id` vs `_id`** | Convex uses `_id`, Drizzle uses `id` |
| **Nullable fields** | Types use `null` for nullable columns |
| **Column selection** | `columns` is post-fetch projection |
| **`like()` performance** | Use search indexes for large datasets |
| **Relations not loading** | Ensure relations exported and `ormEdges` passed |

## Step-by-Step Migration Example

### Before (Drizzle)

```ts title="db/schema.ts"
import { pgTable, serial, text, integer } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';

const users = pgTable('users', {
  id: serial('id').primaryKey(),
  name: text('name').notNull(),
  email: text('email').notNull(),
});

const posts = pgTable('posts', {
  id: serial('id').primaryKey(),
  title: text('title').notNull(),
  userId: integer('user_id').references(() => users.id),
});

const usersRelations = relations(users, ({ many }) => ({
  posts: many(posts),
}));
```

```ts title="app/queries.ts"
import { db } from './db';

export async function getUser(email: string) {
  return await db.query.users.findFirst({
    where: (users, { eq }) => eq(users.email, email),
  });
}
```

### After (Better-Convex)

```ts title="convex/schema.ts"
import { convexTable, relations, text, id, buildSchema, extractRelationsConfig } from 'better-convex/orm';

const users = convexTable('users', {
  name: text().notNull(),
  email: text().notNull(),
});

const posts = convexTable('posts', {
  title: text().notNull(),
  userId: id('users'),
});

const usersRelations = relations(users, ({ many }) => ({
  posts: many(posts),
}));

const postsRelations = relations(posts, ({ one }) => ({
  author: one(users, {
    fields: [posts.userId],
    references: [users._id],
  }),
}));

export const schema = { users, posts, usersRelations, postsRelations };
export const ormSchema = buildSchema(schema);
export const ormEdges = extractRelationsConfig(ormSchema);
```

```ts title="convex/queries.ts"
import { query } from './_generated/server';
import { createDatabase } from 'better-convex/orm';
import { ormSchema, ormEdges } from './schema';

export const getUser = query({
  handler: async (ctx, args) => {
    const db = createDatabase(ctx.db, ormSchema, ormEdges);
    return await db.query.users.findFirst({
      where: (users, { eq }) => eq(users.email, args.email),
    });
  },
});
```

**Changes Made:**
1. Changed imports from `drizzle-orm` to `better-convex/orm`
2. Changed `pgTable` to `convexTable` with column builders
3. Removed manual `id` fields (auto-created as `_id`)
4. Added `buildSchema()` and `extractRelationsConfig()`
5. Created DB instance with `createDatabase`
6. Kept `where` callback shape
7. Changed `users.id` to `users._id` in relations

## Next Steps

<Cards>
  <Card title="Schema Definition" href="/docs/db/orm/schema">
    Deep dive into table and relation patterns
  </Card>
  <Card title="Querying Data" href="/docs/db/orm/queries">
    Master all query operations
  </Card>
  <Card title="Limitations" href="/docs/db/orm/limitations">
    Full list of differences and workarounds
  </Card>
</Cards>
